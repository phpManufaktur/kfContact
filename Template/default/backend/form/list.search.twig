{#
  Contact

  @author Team phpManufaktur <team@phpmanufaktur.de>
  @link https://kit2.phpmanufaktur.de/contact
  @copyright 2013 Ralf Hertsch <ralf.hertsch@phpmanufaktur.de>
  @license MIT License (MIT) http://www.opensource.org/licenses/MIT
#}

<div id="contact_list">
    
  {% if (list|length < 1) %}
    {# The contact list does not contain any data! #}
    <div class="search-container">
      <form action="{{ FRAMEWORK_URL ~ route.contact.search }}" method="post" >
        <input type="text" name="search" />&nbsp;<input type="submit" value="{{ 'Search'|trans }}" />
      </form>
    </div>
  {% else %}
    <div class="search-container">
      <form action="{{ FRAMEWORK_URL ~ route.contact.search }}" method="post" >
        <input type="text" name="search" />&nbsp;<input type="submit" value="{{ 'Search'|trans }}" />
      </form>
    </div>
    <table>
      <thead>
        <tr>  
          {% for head in list.0|keys %}
            {% if head in columns %}
              <th class="head">{{ head|trans }}</th>
            {% endif %}
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% set i = 0 %}
        {% for contact in list %}
          <tr class="{{ cycle(['flop','flip'], i) }}">
            {% for column, value in contact %} 
              {% if column in columns %}
                {% if column == 'contact_id' %}
                  <td class="{{ column }}">
                    {% if contact.contact_type == 'PERSON' %}
                      <a href="{{ FRAMEWORK_URL ~ route.contact.person|replace({'{contact_id}':value}) }}">{{ '%05d'|format(value) }}</a>
                    {% else %}
                      <a href="{{ FRAMEWORK_URL ~ route.contact.company|replace({'{contact_id}':value}) }}">{{ '%05d'|format(value) }}</a>
                    {% endif %}
                  </td>
                {% elseif column == 'contact_type' %}
                  <td class="{{ column }}">{{ value|trans }}</td>
                {% elseif column == 'communication_email' %}
                  <td class="{{ column }}"><a href="mailto:{{ value }}">{{ value }}</a></td>
                {% else %}
                  <td class="{{ column }}">{{ value }}</td>
                {% endif %}
              {% endif %}
            {% endfor %}
          </tr>
          {% set i = i+1 %}
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</div>